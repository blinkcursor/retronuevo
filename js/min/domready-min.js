!function(){function e(e){if(e.preventDefault(),!e.target.parentNode.parentNode.classList.contains("slide--active")&&(document.querySelector(".slide--active").classList.remove("slide--active"),e.target.parentNode.parentNode.classList.add("slide--active"),e.target.dataset.template)){var t=document.querySelector(".main"),a=t.querySelector(".template-wrapper"),n=e.target.dataset.template;t.removeChild(a),t.appendChild(o[n].cloneNode(!0)),l.init()}}function t(e,t){e.parentNode.insertBefore(t,e.nextSibling)}document.documentElement.classList.remove("no-js"),document.documentElement.classList.add("js");var a=document.querySelector(".nav-slider"),n=Array.prototype.slice.call(document.querySelectorAll(".slide")),i=Array.prototype.slice.call(document.querySelectorAll(".slide__text a"));a.classList.add("will-animate"),imagesLoaded(n,{background:!0},function(e){a.classList.add("is-animate"),a.classList.remove("will-animate"),window.setTimeout(function(){a.classList.remove("is-animate")},4e3)});var o={pieces:document.getElementById("pieces").content,projects:document.getElementById("projects").content,services:document.querySelector(".template-wrapper").cloneNode(!0)};i.forEach(function(t){t.addEventListener("click",e,!1)});var l={init:function(){this.cacheVars(),this.gallery&&(this.thisLaunchModal=this.launchModal.bind(this),this.gallery.addEventListener("click",this.thisLaunchModal,!1))},cacheVars:function(){this.gallery=document.querySelector(".gallery")},launchModal:function(e){e.preventDefault(),this.images=Array.prototype.slice.call(this.gallery.querySelectorAll("img")),this.currentImage=e.target,this.modal=document.createElement("div"),this.modal.classList.add("gallery__modal"),this.bindModalEvents(),t(this.gallery,this.modal),this.currentImage=e.target;var a=this.orientateImage(this.currentImage);this.modal.appendChild(a)},orientateImage:function(e){var t=e.cloneNode(!0);return t.height>t.width?t.classList.add("portrait"):t.classList.add("landscape"),t},bindModalEvents:function(){this.thisHandleModalEvents=this.handleModalEvents.bind(this),window.addEventListener("keyup",this.thisHandleModalEvents,!1),this.modal.addEventListener("click",this.thisHandleModalEvents,!1)},handleModalEvents:function(e){if("keyup"===e.type){var t=e.keyCode||e.which;switch(t){case 27:this.killModal();break;case 37:this.updateModal(-1);break;case 39:this.updateModal(1)}}"click"===e.type&&e.target===this.modal&&this.killModal()},updateModal:function(e){var t=this.images.indexOf(this.currentImage),a=t+e;a=a===this.images.length?0:a,a=0>a?this.images.length-1:a;var n=this.images[a];this.modal.removeChild(this.modal.firstChild),this.currentImage=n;var i=this.orientateImage(this.currentImage);this.modal.appendChild(i)},killModal:function(){this.modal.removeEventListener("click",this.thisHandleModalEvents,!1),window.removeEventListener("keyup",this.thisHandleModalEvents,!1),this.modal.parentNode.removeChild(this.modal)}};l.init()}(),function e(t){if("content"in t.createElement("template"))return!1;for(var a=t.getElementsByTagName("template"),n=a.length,i,o,l,s,r=0;n>r;++r){for(i=a[r],o=i.childNodes,l=o.length,s=t.createDocumentFragment();o[0];)s.appendChild(o[0]);i.content=s}}(document),function(){var e={init:function(){var e="scrollBehavior"in document.documentElement.style;e||this.bindEvents()},bindEvents:function(){window.addEventListener("click",this.triggerScroll.bind(this),!1)},triggerScroll:function(e){if(e.target.hash&&e.target.pathname.replace(/^\//,"")===location.pathname.replace(/^\//,"")){var t=document.getElementById(e.target.hash.slice(1)),a=this.getElementY(t);this.smoothScroll(a),e.preventDefault()}},getElementY:function(e){for(var t=e.offsetTop,a=e;a.offsetParent&&a.offsetParent!==document.body;)a=a.offsetParent,t+=a.offsetTop;return t},getCurrentY:function(){return window.self.pageYOffset?window.self.pageYOffset:document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop?document.body.scrollTop:0},smoothScroll:function(e){var t=this.getCurrentY(),a=e-t,n=Math.abs(a/100),i=a/25;if(Math.abs(a)<100)return void scrollTo(0,e);for(var o,l=0;25>=l;l++)o=Math.round(t+l*i),setTimeout("window.scrollTo(0, "+o+")",Math.round(l*n))}};e.init()}();